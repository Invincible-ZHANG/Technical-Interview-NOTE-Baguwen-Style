<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'zh-CN' }}">
<head>
    {% if site.ga4_measurement_id %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.ga4_measurement_id }}"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);} gtag('js', new Date());
        gtag('config', '{{ site.ga4_measurement_id }}');
    </script>
    {% endif %}

    {%- include head.html -%}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--ç§»åŠ¨ç«¯æç¤º-->
    <script src="/assets/js/mobile-alert.js" defer></script>
    <title>{{ page.title }} | {{ site.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/background.css' | relative_url }}">
    {{ content_for_header }}
    <!-- å¼•å…¥ MathJax -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
    <script src="{{ '/assets/js/mac_code.js' | relative_url }}" defer></script>
    <script src="{{ '/assets/js/click-values.js' | relative_url }}" defer></script>

    <!-- å…¨ç«™å…¬ç”¨å¯¼èˆªæ  -->
    {% include nav.html %}

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="subpage-container">
        {%- comment -%}
        å¦‚æœè¿™æ˜¯ notes ç›®å½•ä¸‹çš„ index é¡µé¢ï¼Œå°±æ¸²æŸ“ç³»åˆ—å¡ç‰‡åˆ—è¡¨ï¼›å¦åˆ™è¾“å‡ºå¸¸è§„å†…å®¹
        {%- endcomment -%}
        {% assign dir = page.dir %}
        {% assign note_index = dir | append: 'index.html' %}

        {% if dir contains '/notes/' and page.url == dir %}
        <!-- æ¸²æŸ“ /notes/ æœ¬èº« çš„ç³»åˆ—å¡ç‰‡åˆ—è¡¨ -->
        <header class="section-header">
            <h1>{{ page.title }}</h1>
        </header>
        <div class="post-grid">
            {% assign these = site.pages
            | where: "dir", page.dir
            | reject: "url", page.url
            | sort: "date"
            | reverse %}
            {% for note in these %}
            {%- assign filename = note.path | split:'/' | last -%}
            {% unless filename == "index.html" or filename == "index.md" %}
            <article class="post-card">
                <h3 class="post-title">
                    <a href="{{ note.url }}" target="_blank" rel="noopener noreferrer">
                        {{ note.title }}
                    </a>
                </h3>
                <p class="post-excerpt">
                    {{ note.excerpt | default: note.content | truncatewords: 15 }}
                </p>
                <time class="post-date">ğŸ•’ {{ note.date | date: "%Y-%m-%d" }}</time>
            </article>
            {% endunless %}
            {% endfor %}
        </div>

        {% elsif dir contains '/notes/' and page.url == note_index %}
        <!-- æ¸²æŸ“ /notes/index.html çš„ç³»åˆ—å¡ç‰‡åˆ—è¡¨ï¼ˆåŒä¸Šï¼‰ -->
        <header class="section-header">
            <h1>{{ page.title }}</h1>
        </header>
        <div class="post-grid">
            {% assign these = site.pages
            | where: "dir", page.dir
            | reject: "url", page.url
            | sort: "date"
            | reverse %}
            {% for note in these %}
            {%- assign filename = note.path | split:'/' | last -%}
            {% unless filename == "index.html" or filename == "index.md" %}
            <article class="post-card">
                <h3 class="post-title">
                    <a href="{{ note.url }}" target="_blank" rel="noopener noreferrer">
                        {{ note.title }}
                    </a>
                </h3>
                <p class="post-excerpt">
                    {{ note.excerpt | default: note.content | truncatewords: 30 }}
                </p>
                <time class="post-date">ğŸ•’ {{ note.date | date: "%Y-%m-%d" }}</time>
            </article>
            {% endunless %}
            {% endfor %}
        </div>

        {% else %}
        <!-- æ™®é€šé¡µé¢ä»ç„¶è¾“å‡ºåŸç”Ÿ Markdown å†…å®¹ -->
        {{ content }}
        {% endif %}
    </main>

    <!-- ====== è¯„è®ºåŒºï¼ˆæ”¾åœ¨æ­£æ–‡ä¸‹æ–¹ã€é¡µé¢æœ€åº•ï¼‰ ====== -->
    <!--<div id="comments" class="giscus"></div>
    <script src="https://giscus.app/client.js"
            data-repo="Invincible-ZHANG/Technical-Interview-NOTE-Baguwen-Style"
            data-repo-id="R_kgDOPlZeaQ"
            data-category="Comments"
            data-category-id="DIC_kwDOPlZeAc4Ct2gH"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="bottom"
            data-theme="noborder_dark"
            data-lang="zh-CN"
            data-loading="lazy"
            crossorigin="anonymous"
            async>
    </script>-->
    <!-- ====== è¯„è®ºåŒºç»“æŸ ====== -->
    {{ content_for_footer }}
</body>
</html>
